<!DOCTYPE html><head><meta charset="UTF-8"><title>7 Buenas pr√°cticas para sistemas RAG de alto rendimiento 2025 | Vectoriza.me</title><meta name="description" content="Gu√≠a completa con las mejores pr√°cticas para optimizar sistemas RAG: multi-query retrieval, reranking, chunking inteligente, control de alucinaciones y m√°s. Incluye ejemplos pr√°cticos y m√©tricas reales."><meta name="robots" content="index, follow"><meta property="og:title" content="7 Buenas pr√°cticas para sistemas RAG de alto rendimiento 2025 | Vectoriza.me"><meta property="og:description" content="Aprende las t√©cnicas avanzadas que empresas l√≠deres usan para construir sistemas RAG con 95%+ de precisi√≥n. Ejemplos pr√°cticos y casos reales incluidos."><meta property="og:type" content="article"><meta property="og:url" content="https://www.vectoriza.me/blog/buenas-practicas-rag"><meta name="twitter:card" content="summary_large_image"><link rel="stylesheet" href="/_astro/ai-first-ia-nativa.DXhrbwUy.css"></head> <html lang="es"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Agentes de IA para Empresas | RAG, Automatizaci√≥n y Insta Web - Vectoriza.me</title><meta name="description" content="Implemento agentes de IA aut√≥nomos, sistemas RAG, flujos ag√©nticos y webs ultra-r√°pidas para empresas. Reduzco costes hasta 80%, automatizo procesos 24/7. Resultados medibles desde la primera semana. Barcelona, Espa√±a."><meta name="keywords" content="agentes de IA, agentes IA empresas, sistemas RAG, RAG empresas, flujos ag√©nticos, automatizaci√≥n IA, insta web, p√°ginas web IA, videos IA, im√°genes IA, formaciones IA, cultura IA, gobierno IA, IA responsable, consultor√≠a IA, implementaci√≥n IA empresas, servicios IA Barcelona, agentes aut√≥nomos, chatbots inteligentes, automatizaci√≥n procesos IA"><meta name="author" content="Marc Gimeno"><meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><link rel="canonical" href="https://www.vectoriza.me/"><!-- Open Graph / Facebook --><meta property="og:title" content="Agentes de IA para Empresas | RAG, Automatizaci√≥n y Insta Web"><meta property="og:description" content="Implemento agentes de IA aut√≥nomos, sistemas RAG y automatizaci√≥n para empresas. Reduzco costes hasta 80%, resultados desde la primera semana. Barcelona."><meta property="og:url" content="https://www.vectoriza.me/"><meta property="og:type" content="website"><meta property="og:image" content="https://www.vectoriza.me/og-image.jpg"><meta property="og:locale" content="es_ES"><meta property="og:site_name" content="Vectoriza.me"><!-- Twitter --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Agentes de IA para Empresas | Vectoriza.me"><meta name="twitter:description" content="Agentes aut√≥nomos, RAGs y automatizaci√≥n IA. Reduzco costes hasta 80%, resultados desde la primera semana."><meta name="twitter:image" content="https://www.vectoriza.me/og-image.jpg"><meta name="twitter:creator" content="@marcgimeno"><!-- Favicon --><link rel="icon" href="/favicon.ico"><!-- Schema.org Structured Data --><script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "ProfessionalService",
      "name": "Vectoriza.me",
      "description": "Servicios de implementaci√≥n de inteligencia artificial para empresas: agentes aut√≥nomos, sistemas RAG, flujos ag√©nticos, automatizaci√≥n y webs ultra-r√°pidas",
      "url": "https://www.vectoriza.me",
      "logo": "https://www.vectoriza.me/logo.png",
      "image": "https://www.vectoriza.me/og-image.jpg",
      "telephone": "+34-XXX-XXX-XXX",
      "email": "contacto@vectoriza.me",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Barcelona",
        "addressRegion": "Catalu√±a",
        "addressCountry": "ES"
      },
      "areaServed": {
        "@type": "Country",
        "name": "Espa√±a"
      },
      "serviceType": [
        "Agentes de IA aut√≥nomos",
        "Sistemas RAG (Retrieval-Augmented Generation)",
        "Flujos ag√©nticos y automatizaci√≥n",
        "Insta Web (webs personalizadas ultra-r√°pidas)",
        "Videos e im√°genes con IA",
        "Formaciones de implementaci√≥n de IA",
        "Cultura IA organizacional",
        "Gobierno IA e IA Responsable",
        "Cumplimiento IA ACT"
      ],
      "provider": {
        "@type": "Person",
        "name": "Marc Gimeno",
        "jobTitle": "Experto en Inteligencia Artificial",
        "url": "https://www.linkedin.com/in/marc-gimeno-b2546020a/",
        "worksFor": {
          "@type": "Organization",
          "name": "CaixaBank Payments & Consumer"
        }
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "5",
        "reviewCount": "10"
      }
    }
    </script><script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "¬øQu√© son los agentes de IA aut√≥nomos?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Los agentes de IA aut√≥nomos son sistemas inteligentes que trabajan 24/7, toman decisiones aut√≥nomas, ejecutan tareas complejas y aprenden de tus procesos. No son chatbots simples: son sistemas aut√≥nomos que transforman operaciones completas sin intervenci√≥n humana constante."
        }
      }, {
        "@type": "Question",
        "name": "¬øQu√© es un sistema RAG?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "RAG (Retrieval-Augmented Generation) combina modelos generativos con tus documentos, bases de datos y conocimiento interno. Proporciona respuestas precisas, sin alucinaciones, basadas en informaci√≥n real y actualizada de tu empresa."
        }
      }, {
        "@type": "Question",
        "name": "¬øCu√°nto tiempo tarda implementar agentes de IA?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Agentes funcionando en d√≠as, Insta Web lista en tiempo r√©cord, flujos operativos mejorados desde la primera semana. Resultados visibles desde el inicio, sin esperar meses."
        }
      }, {
        "@type": "Question",
        "name": "¬øQu√© costes puedo reducir con IA?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Los sistemas de IA pueden reducir costes operativos del 60-80% en procesos automatizados. Agentes que trabajan 24/7 sin costes adicionales, automatizaci√≥n que elimina tareas manuales repetitivas y reduce errores humanos costosos."
        }
      }]
    }
    </script></head> <body class="text-white font-sans"> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="ZCm7fc" prefix="r0" component-url="/_astro/Navbar.BRaRXztY.js" component-export="default" renderer-url="/_astro/client.DdVazhZO.js" props="{}" ssr client="load" opts="{&quot;name&quot;:&quot;Navbar&quot;,&quot;value&quot;:true}" await-children><nav class="w-full fixed top-0 z-50 px-6 md:px-10 py-4 bg-black/70 backdrop-blur-xl border-b border-white/10 shadow-md shadow-black/30 flex justify-between items-center" style="opacity:0;transform:translateY(-20px)"><a href="/" class="text-xl md:text-2xl font-extrabold tracking-tight text-white hover:text-cyan-400 transition cursor-pointer">vectoriza.<span class="text-cyan-400">me</span></a><div class="hidden md:flex space-x-6 text-sm font-medium"><button class="text-white/80 hover:text-cyan-400 transition duration-300 cursor-pointer" title="IA Empresarial, Agentes IA, RAG">Inicio</button><button class="text-white/80 hover:text-cyan-400 transition duration-300 cursor-pointer" title="Agentes Aut√≥nomos, RAG, Insta Web, Videos IA, Formaci√≥n IA">Servicios IA</button><button class="text-white/80 hover:text-cyan-400 transition duration-300 cursor-pointer" title="Agentes IA, Sistemas RAG, Flujos Ag√©nticos, Automatizaci√≥n IA">Soluciones IA</button><button class="text-white/80 hover:text-cyan-400 transition duration-300 cursor-pointer" title="Casos Reales IA, Implementaci√≥n IA, Ejemplos IA Empresarial">Casos de Uso</button><button class="text-white/80 hover:text-cyan-400 transition duration-300 cursor-pointer" title="Impacto IA, Reducci√≥n Costes, Ahorro Tiempo, Resultados IA">ROI &amp; Resultados</button><button class="text-white/80 hover:text-cyan-400 transition duration-300 cursor-pointer" title="Art√≠culos IA, Gu√≠as RAG, Tendencias IA, Mejores Pr√°cticas IA">Blog IA</button><button class="text-white/80 hover:text-cyan-400 transition duration-300 cursor-pointer" title="C√≥mo Funciona, Implementaci√≥n IA, Metodolog√≠a IA">Proceso</button><button class="text-white/80 hover:text-cyan-400 transition duration-300 cursor-pointer" title="Consultor IA, Especialista IA, Marc Gimeno">Experto IA</button><button class="text-white/80 hover:text-cyan-400 transition duration-300 cursor-pointer" title="Solicitar Propuesta, Consulta IA, Empezar Proyecto IA">Contacto</button></div><button class="ml-4 hidden md:inline-block px-5 py-2 bg-cyan-500 hover:bg-cyan-600 transition-all text-black font-semibold rounded-full shadow-[0_0_20px_rgba(0,255,255,0.2)] cursor-pointer hover:shadow-[0_0_30px_rgba(0,255,255,0.3)]">Empezar ahora</button><div class="md:hidden"><button class="text-white focus:outline-none"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" height="28" width="28" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path></svg></button></div></nav><!--astro:end--></astro-island> <main>  <section class="w-full px-6 pt-40 pb-20 max-w-6xl mx-auto text-white"> <div class="text-center mb-12"> <span class="inline-block px-4 py-2 bg-cyan-400/20 text-cyan-400 rounded-full text-sm font-semibold mb-6">
Gu√≠a Avanzada 2025
</span> <h1 class="text-4xl md:text-6xl font-extrabold mb-6 text-cyan-400">
7 Buenas pr√°cticas para sistemas RAG de alto rendimiento
</h1> <p class="text-xl text-white/80 text-center max-w-4xl mx-auto mb-4">
Descubre las t√©cnicas que separan a los sistemas RAG <strong class="text-cyan-400">que realmente funcionan</strong> de los que solo prometen. Basado en implementaciones reales con <strong>95%+ de precisi√≥n</strong>.
</p> <p class="text-base text-white/60 max-w-3xl mx-auto">
‚è±Ô∏è Tiempo de lectura: 15 minutos | üìä Incluye ejemplos de c√≥digo, m√©tricas reales y casos de uso
</p> </div> <!-- Introducci√≥n con problema --> <div class="bg-gradient-to-r from-red-900/20 to-orange-900/20 border-l-4 border-red-500 p-8 rounded-xl mb-16"> <h2 class="text-2xl font-bold text-red-400 mb-4">‚ö†Ô∏è El problema: La mayor√≠a de sistemas RAG fallan en producci√≥n</h2> <p class="text-white/80 text-lg mb-4">
Seg√∫n estudios recientes, <strong>el 70% de los sistemas RAG implementados</strong> no cumplen las expectativas en producci√≥n. Las razones m√°s comunes:
</p> <ul class="text-white/80 space-y-2 mb-4"> <li>‚ùå Respuestas gen√©ricas o irrelevantes (chunking deficiente)</li> <li>‚ùå Alucinaciones frecuentes (prompts mal dise√±ados)</li> <li>‚ùå Informaci√≥n desactualizada (sin proceso de actualizaci√≥n)</li> <li>‚ùå Tiempos de respuesta lentos (arquitectura no optimizada)</li> </ul> <p class="text-cyan-400 font-semibold text-lg">
Las 7 pr√°cticas que ver√°s a continuaci√≥n son las que usan los sistemas RAG que realmente funcionan en producci√≥n.
</p> </div> <!-- Pr√°ctica 1: Multi-Query Retrieval --> <div class="mb-16 bg-gradient-to-br from-cyan-900/20 to-blue-900/20 border border-cyan-400/30 p-8 rounded-2xl"> <div class="flex items-center gap-4 mb-6"> <div class="bg-cyan-400 text-black text-2xl font-bold w-12 h-12 rounded-full flex items-center justify-center">1</div> <h2 class="text-3xl font-bold text-cyan-400">Multi-Query Retrieval: No dependas de una sola pregunta</h2> </div> <div class="bg-[#0a0a0a] p-6 rounded-xl mb-6"> <h3 class="text-xl font-bold text-cyan-300 mb-4">¬øQu√© es y por qu√© importa?</h3> <p class="text-white/80 mb-4">
Los usuarios formulan preguntas de m√∫ltiples formas. "¬øCu√°l es la pol√≠tica de devoluciones?" puede ser tambi√©n "¬øC√≥mo devuelvo un producto?" o "¬øPuedo devolver algo que compr√©?".
<strong class="text-cyan-400">Multi-Query Retrieval</strong> genera autom√°ticamente 3-5 variantes de la pregunta y busca con todas ellas, recuperando m√°s contexto relevante.
</p> <div class="grid md:grid-cols-2 gap-4 mt-6"> <div class="bg-red-900/20 border border-red-500/30 p-4 rounded-lg"> <p class="text-red-400 font-semibold mb-2">‚ùå Sin Multi-Query:</p> <p class="text-white/70 text-sm">Recuperaci√≥n: 2-3 documentos relevantes</p> <p class="text-white/70 text-sm">Precisi√≥n: ~65%</p> </div> <div class="bg-green-900/20 border border-green-500/30 p-4 rounded-lg"> <p class="text-green-400 font-semibold mb-2">‚úÖ Con Multi-Query:</p> <p class="text-white/70 text-sm">Recuperaci√≥n: 8-12 documentos relevantes</p> <p class="text-white/70 text-sm">Precisi√≥n: ~85-90%</p> </div> </div> </div> <div class="bg-[#0a0a0a] p-6 rounded-xl"> <h3 class="text-xl font-bold text-cyan-300 mb-4">üíª Implementaci√≥n pr√°ctica (LangChain)</h3> <div class="bg-[#141414] p-4 rounded-lg font-mono text-sm text-cyan-300 overflow-x-auto"> <pre>from langchain.retrievers.multi_query import MultiQueryRetriever
from langchain.llms import OpenAI

# Crea m√∫ltiples variantes de la consulta
retriever = MultiQueryRetriever.from_llm(
    retriever=vectorstore.as_retriever(),
    llm=OpenAI(temperature=0)
)

# Busca con todas las variantes
docs = retriever.get_relevant_documents(
    query=&quot;¬øCu√°l es la pol√≠tica de devoluciones?&quot;
)
# Genera autom√°ticamente:
# - &quot;pol√≠tica de devoluciones&quot;
# - &quot;c√≥mo devolver productos&quot;
# - &quot;proceso de devoluci√≥n&quot;
# - &quot;condiciones de devoluci√≥n&quot;</pre> </div> </div> <div class="mt-6 bg-yellow-900/20 border border-yellow-500/30 p-4 rounded-lg"> <p class="text-yellow-300 font-semibold mb-2">üí° Tip profesional:</p> <p class="text-white/80 text-sm">
Usa temperatura baja (0-0.3) para generar variantes m√°s consistentes. Para consultas muy t√©cnicas, genera 5 variantes. Para consultas generales, 3 son suficientes.
</p> </div> </div> <!-- Pr√°ctica 2: Reranking --> <div class="mb-16 bg-gradient-to-br from-purple-900/20 to-pink-900/20 border border-purple-400/30 p-8 rounded-2xl"> <div class="flex items-center gap-4 mb-6"> <div class="bg-purple-400 text-black text-2xl font-bold w-12 h-12 rounded-full flex items-center justify-center">2</div> <h2 class="text-3xl font-bold text-purple-400">Reranking: Ordena por relevancia real, no por similitud vectorial</h2> </div> <div class="bg-[#0a0a0a] p-6 rounded-xl mb-6"> <h3 class="text-xl font-bold text-purple-300 mb-4">El problema de la b√∫squeda vectorial pura</h3> <p class="text-white/80 mb-4">
La b√∫squeda por similitud de vectores (cosine similarity) es r√°pida pero <strong>no siempre captura la relevancia sem√°ntica real</strong>. Un documento puede tener alta similitud vectorial pero baja relevancia contextual.
</p> <p class="text-white/80 mb-4"> <strong class="text-purple-400">Reranking</strong> usa modelos especializados (como Cohere Rerank, Cross-Encoder) que reordenan los resultados bas√°ndose en relevancia real para la consulta espec√≠fica.
</p> <div class="grid md:grid-cols-2 gap-4 mt-6"> <div class="bg-red-900/20 border border-red-500/30 p-4 rounded-lg"> <p class="text-red-400 font-semibold mb-2">‚ùå Sin Reranking:</p> <p class="text-white/70 text-sm">Precisi√≥n en top 3: ~70%</p> <p class="text-white/70 text-sm">Documentos irrelevantes: 30-40%</p> </div> <div class="bg-green-900/20 border border-green-500/30 p-4 rounded-lg"> <p class="text-green-400 font-semibold mb-2">‚úÖ Con Reranking:</p> <p class="text-white/70 text-sm">Precisi√≥n en top 3: ~92%</p> <p class="text-white/70 text-sm">Documentos irrelevantes: &lt;5%</p> </div> </div> </div> <div class="bg-[#0a0a0a] p-6 rounded-xl"> <h3 class="text-xl font-bold text-purple-300 mb-4">üíª Implementaci√≥n con Cohere Rerank</h3> <div class="bg-[#141414] p-4 rounded-lg font-mono text-sm text-purple-300 overflow-x-auto"> <pre>from langchain.retrievers import ContextualCompressionRetriever
from langchain.retrievers.document_compressors import CohereRerank

# Primero recupera con b√∫squeda vectorial
base_retriever = vectorstore.as_retriever(search_kwargs={&quot;k&quot;: 20})

# Luego rerankea los resultados
compressor = CohereRerank(
    model=&quot;rerank-english-v2.0&quot;,
    top_n=5  # Solo los 5 m√°s relevantes
)

retriever = ContextualCompressionRetriever(
    base_compressor=compressor,
    base_retriever=base_retriever
)

# Ahora obtienes los documentos m√°s relevantes
docs = retriever.get_relevant_documents(query)</pre> </div> </div> <div class="mt-6 bg-yellow-900/20 border border-yellow-500/30 p-4 rounded-lg"> <p class="text-yellow-300 font-semibold mb-2">üí° Estrategia de dos etapas:</p> <p class="text-white/80 text-sm"> <strong>Etapa 1:</strong> Recupera 15-20 documentos con b√∫squeda vectorial (r√°pido). <strong>Etapa 2:</strong> Rerankea y selecciona los top 3-5 (preciso). Esto combina velocidad y precisi√≥n.
</p> </div> </div> <!-- Pr√°ctica 3: Chunking inteligente --> <div class="mb-16 bg-gradient-to-br from-green-900/20 to-emerald-900/20 border border-green-400/30 p-8 rounded-2xl"> <div class="flex items-center gap-4 mb-6"> <div class="bg-green-400 text-black text-2xl font-bold w-12 h-12 rounded-full flex items-center justify-center">3</div> <h2 class="text-3xl font-bold text-green-400">Chunking inteligente: Divide por significado, no por tama√±o</h2> </div> <div class="bg-[#0a0a0a] p-6 rounded-xl mb-6"> <h3 class="text-xl font-bold text-green-300 mb-4">Por qu√© el chunking fijo falla</h3> <p class="text-white/80 mb-4">
Dividir documentos en chunks de 500 tokens fijos es <strong>r√°pido pero destructivo</strong>. Puedes cortar una frase a la mitad, separar un t√≠tulo de su contenido, o perder contexto crucial.
</p> <p class="text-white/80 mb-4"> <strong class="text-green-400">Chunking sem√°ntico</strong> divide documentos respetando la estructura: p√°rrafos, secciones, listas. Cada chunk mantiene coherencia sem√°ntica.
</p> <div class="grid md:grid-cols-2 gap-4 mt-6"> <div class="bg-red-900/20 border border-red-500/30 p-4 rounded-lg"> <p class="text-red-400 font-semibold mb-2">‚ùå Chunking fijo (500 tokens):</p> <p class="text-white/70 text-sm mb-2">Ejemplo de chunk mal cortado:</p> <p class="text-white/50 text-xs italic">"...el proceso de devoluci√≥n requiere que el producto est√© en su estado original. Para iniciar el proceso, contacta con..."</p> <p class="text-white/70 text-sm mt-2">Problema: Informaci√≥n incompleta</p> </div> <div class="bg-green-900/20 border border-green-500/30 p-4 rounded-lg"> <p class="text-green-400 font-semibold mb-2">‚úÖ Chunking sem√°ntico:</p> <p class="text-white/70 text-sm mb-2">Chunk completo y coherente:</p> <p class="text-white/50 text-xs italic">"Pol√≠tica de devoluciones: El proceso de devoluci√≥n requiere que el producto est√© en su estado original. Para iniciar el proceso, contacta con atenci√≥n al cliente en un plazo m√°ximo de 30 d√≠as."</p> <p class="text-white/70 text-sm mt-2">Ventaja: Contexto completo</p> </div> </div> </div> <div class="bg-[#0a0a0a] p-6 rounded-xl"> <h3 class="text-xl font-bold text-green-300 mb-4">üíª Chunking sem√°ntico con LangChain</h3> <div class="bg-[#141414] p-4 rounded-lg font-mono text-sm text-green-300 overflow-x-auto"> <pre>from langchain.text_splitter import RecursiveCharacterTextSplitter
from langchain.text_splitter import MarkdownHeaderTextSplitter

# Para documentos estructurados (Markdown, HTML)
markdown_splitter = MarkdownHeaderTextSplitter(
    headers_to_split_on=[
        (&quot;#&quot;, &quot;Header 1&quot;),
        (&quot;##&quot;, &quot;Header 2&quot;),
        (&quot;###&quot;, &quot;Header 3&quot;),
    ]
)

# Para texto general con respeto a p√°rrafos
text_splitter = RecursiveCharacterTextSplitter(
    chunk_size=1000,
    chunk_overlap=200,
    separators=[&quot;\n\n&quot;, &quot;\n&quot;, &quot;. &quot;, &quot; &quot;, &quot;&quot;]  # Respeta p√°rrafos primero
)

# Divide respetando estructura
chunks = text_splitter.split_documents(documents)</pre> </div> </div> <div class="mt-6 bg-yellow-900/20 border border-yellow-500/30 p-4 rounded-lg"> <p class="text-yellow-300 font-semibold mb-2">üí° Regla de oro:</p> <p class="text-white/80 text-sm">
Usa <strong>overlap de 10-20%</strong> entre chunks para mantener contexto. Para documentos t√©cnicos, respeta secciones. Para conversaciones, respeta turnos completos.
</p> </div> </div> <!-- Pr√°ctica 4: Prompt Engineering --> <div class="mb-16 bg-gradient-to-br from-yellow-900/20 to-orange-900/20 border border-yellow-400/30 p-8 rounded-2xl"> <div class="flex items-center gap-4 mb-6"> <div class="bg-yellow-400 text-black text-2xl font-bold w-12 h-12 rounded-full flex items-center justify-center">4</div> <h2 class="text-3xl font-bold text-yellow-400">Prompt Engineering: Instrucciones que eliminan alucinaciones</h2> </div> <div class="bg-[#0a0a0a] p-6 rounded-xl mb-6"> <h3 class="text-xl font-bold text-yellow-300 mb-4">El prompt correcto reduce alucinaciones en 80%</h3> <p class="text-white/80 mb-4">
Un prompt mal dise√±ado permite que el LLM invente informaci√≥n. Un prompt bien dise√±ado <strong>fuerza al modelo a usar solo el contexto proporcionado</strong> y ser honesto cuando no sabe algo.
</p> <div class="grid md:grid-cols-2 gap-4 mt-6"> <div class="bg-red-900/20 border border-red-500/30 p-4 rounded-lg"> <p class="text-red-400 font-semibold mb-2">‚ùå Prompt d√©bil:</p> <div class="bg-[#141414] p-3 rounded text-xs text-red-300 font-mono"> <p>"Responde la siguiente pregunta:"</p> </div> <p class="text-white/70 text-sm mt-2">Resultado: Inventa informaci√≥n</p> </div> <div class="bg-green-900/20 border border-green-500/30 p-4 rounded-lg"> <p class="text-green-400 font-semibold mb-2">‚úÖ Prompt robusto:</p> <div class="bg-[#141414] p-3 rounded text-xs text-green-300 font-mono"> <p>"Usa √öNICAMENTE la informaci√≥n del siguiente contexto para responder. Si la informaci√≥n no est√° en el contexto, di 'No tengo esa informaci√≥n en mi base de conocimiento'. Contexto: {context}"</p> </div> <p class="text-white/70 text-sm mt-2">Resultado: Respuestas precisas</p> </div> </div> </div> <div class="bg-[#0a0a0a] p-6 rounded-xl"> <h3 class="text-xl font-bold text-yellow-300 mb-4">üíª Template de prompt profesional</h3> <div class="bg-[#141414] p-4 rounded-lg font-mono text-sm text-yellow-300 overflow-x-auto"> <pre>SYSTEM_PROMPT = &quot;&quot;&quot;Eres un asistente experto que responde preguntas 
bas√°ndote √öNICAMENTE en el contexto proporcionado.

REGLAS ESTRICTAS:
1. Usa SOLO la informaci√≥n del contexto para responder
2. Si la informaci√≥n no est√° en el contexto, di claramente: 
   &quot;No tengo esa informaci√≥n en mi base de conocimiento&quot;
3. Cita las fuentes cuando sea posible
4. S√© conciso pero completo
5. NO inventes informaci√≥n, incluso si crees que la sabes

Contexto proporcionado:
{context}

Pregunta del usuario: {question}

Respuesta:&quot;&quot;&quot;</pre> </div> </div> <div class="mt-6 bg-yellow-900/20 border border-yellow-500/30 p-4 rounded-lg"> <p class="text-yellow-300 font-semibold mb-2">üí° T√©cnicas avanzadas:</p> <ul class="text-white/80 text-sm space-y-1"> <li>‚Ä¢ <strong>Few-shot examples:</strong> Muestra ejemplos de respuestas correctas</li> <li>‚Ä¢ <strong>Chain-of-thought:</strong> Pide al modelo que explique su razonamiento</li> <li>‚Ä¢ <strong>Self-consistency:</strong> Genera m√∫ltiples respuestas y elige la m√°s consistente</li> </ul> </div> </div> <!-- Pr√°ctica 5: Filtrado de relevancia --> <div class="mb-16 bg-gradient-to-br from-blue-900/20 to-cyan-900/20 border border-blue-400/30 p-8 rounded-2xl"> <div class="flex items-center gap-4 mb-6"> <div class="bg-blue-400 text-black text-2xl font-bold w-12 h-12 rounded-full flex items-center justify-center">5</div> <h2 class="text-3xl font-bold text-blue-400">Filtrado de relevancia: No env√≠es ruido al LLM</h2> </div> <div class="bg-[#0a0a0a] p-6 rounded-xl mb-6"> <h3 class="text-xl font-bold text-blue-300 mb-4">El costo de enviar documentos irrelevantes</h3> <p class="text-white/80 mb-4">
Enviar 10 documentos al LLM cuando solo 3 son relevantes tiene tres problemas:
</p> <ul class="text-white/80 space-y-2 mb-4"> <li>üí∞ <strong>Costo:</strong> M√°s tokens = m√°s dinero (GPT-4 cobra por token)</li> <li>‚è±Ô∏è <strong>Velocidad:</strong> Procesar m√°s contexto = respuestas m√°s lentas</li> <li>üéØ <strong>Calidad:</strong> El LLM puede confundirse con informaci√≥n contradictoria</li> </ul> <p class="text-white/80 mb-4"> <strong class="text-blue-400">Soluci√≥n:</strong> Establece un umbral de similitud m√≠nimo (ej: 0.7) y filtra documentos por debajo de ese umbral antes de enviarlos al LLM.
</p> </div> <div class="bg-[#0a0a0a] p-6 rounded-xl"> <h3 class="text-xl font-bold text-blue-300 mb-4">üíª Implementaci√≥n con umbral de relevancia</h3> <div class="bg-[#141414] p-4 rounded-lg font-mono text-sm text-blue-300 overflow-x-auto"> <pre>from langchain.vectorstores import Pinecone

# Configura umbral de relevancia
SIMILARITY_THRESHOLD = 0.7

# Recupera documentos con scores
docs_with_scores = vectorstore.similarity_search_with_score(
    query, 
    k=10
)

# Filtra por umbral
relevant_docs = [
    doc for doc, score in docs_with_scores 
    if score &gt;= SIMILARITY_THRESHOLD
]

# Si no hay documentos relevantes, informa al usuario
if not relevant_docs:
    return &quot;No encontr√© informaci√≥n relevante para tu consulta.&quot;

# Env√≠a solo los relevantes al LLM
response = llm.generate(context=relevant_docs, query=query)</pre> </div> </div> </div> <!-- Pr√°ctica 6: Actualizaci√≥n continua --> <div class="mb-16 bg-gradient-to-br from-pink-900/20 to-red-900/20 border border-pink-400/30 p-8 rounded-2xl"> <div class="flex items-center gap-4 mb-6"> <div class="bg-pink-400 text-black text-2xl font-bold w-12 h-12 rounded-full flex items-center justify-center">6</div> <h2 class="text-3xl font-bold text-pink-400">Actualizaci√≥n continua: Mant√©n tu base de conocimiento viva</h2> </div> <div class="bg-[#0a0a0a] p-6 rounded-xl mb-6"> <h3 class="text-xl font-bold text-pink-300 mb-4">La informaci√≥n desactualizada mata la confianza</h3> <p class="text-white/80 mb-4">
Un sistema RAG con informaci√≥n de hace 6 meses es <strong>peor que in√∫til: es peligroso</strong>. Los usuarios conf√≠an en las respuestas, y si encuentran informaci√≥n obsoleta, perder√°n toda confianza en el sistema.
</p> <div class="grid md:grid-cols-3 gap-4 mt-6"> <div class="bg-[#141414] p-4 rounded-lg"> <p class="text-pink-400 font-semibold mb-2">üîÑ Actualizaci√≥n incremental</p> <p class="text-white/70 text-sm">Actualiza solo documentos modificados, no toda la base</p> </div> <div class="bg-[#141414] p-4 rounded-lg"> <p class="text-pink-400 font-semibold mb-2">‚è∞ Programaci√≥n autom√°tica</p> <p class="text-white/70 text-sm">Cron jobs que revisan cambios diarios/semanales</p> </div> <div class="bg-[#141414] p-4 rounded-lg"> <p class="text-pink-400 font-semibold mb-2">üîî Webhooks</p> <p class="text-white/70 text-sm">Actualizaci√≥n en tiempo real cuando cambian documentos</p> </div> </div> </div> <div class="bg-[#0a0a0a] p-6 rounded-xl"> <h3 class="text-xl font-bold text-pink-300 mb-4">üíª Pipeline de actualizaci√≥n autom√°tica</h3> <div class="bg-[#141414] p-4 rounded-lg font-mono text-sm text-pink-300 overflow-x-auto"> <pre>import hashlib
from datetime import datetime

def update_vector_store(document_path):
    # 1. Calcula hash del documento
    doc_hash = hashlib.md5(open(document_path).read()).hexdigest()
    
    # 2. Verifica si cambi√≥
    if doc_hash != get_stored_hash(document_path):
        # 3. Re-chunkea y actualiza
        chunks = chunk_document(document_path)
        vectorstore.add_documents(chunks)
        
        # 4. Actualiza metadata
        update_metadata(document_path, {
            &#39;last_updated&#39;: datetime.now(),
            &#39;hash&#39;: doc_hash
        })

# Ejecuta diariamente
schedule.every().day.at(&quot;02:00&quot;).do(update_all_documents)</pre> </div> </div> </div> <!-- Pr√°ctica 7: Control de alucinaciones --> <div class="mb-16 bg-gradient-to-br from-indigo-900/20 to-purple-900/20 border border-indigo-400/30 p-8 rounded-2xl"> <div class="flex items-center gap-4 mb-6"> <div class="bg-indigo-400 text-black text-2xl font-bold w-12 h-12 rounded-full flex items-center justify-center">7</div> <h2 class="text-3xl font-bold text-indigo-400">Control de alucinaciones: Detecta y previene respuestas inventadas</h2> </div> <div class="bg-[#0a0a0a] p-6 rounded-xl mb-6"> <h3 class="text-xl font-bold text-indigo-300 mb-4">Sistema de verificaci√≥n multicapa</h3> <p class="text-white/80 mb-4">
Incluso con las mejores pr√°cticas, los LLMs pueden alucinar. Un <strong>sistema de verificaci√≥n</strong> detecta y previene estas situaciones:
</p> <div class="space-y-4"> <div class="bg-[#141414] p-4 rounded-lg"> <p class="text-indigo-400 font-semibold mb-2">1. Verificaci√≥n de citas</p> <p class="text-white/70 text-sm">Verifica que todas las afirmaciones puedan rastrearse a documentos en el contexto</p> </div> <div class="bg-[#141414] p-4 rounded-lg"> <p class="text-indigo-400 font-semibold mb-2">2. Scoring de confianza</p> <p class="text-white/70 text-sm">Asigna un score de confianza (0-1) basado en similitud de documentos y coherencia</p> </div> <div class="bg-[#141414] p-4 rounded-lg"> <p class="text-indigo-400 font-semibold mb-2">3. Respuestas condicionales</p> <p class="text-white/70 text-sm">Si el score es bajo, responde: "No estoy seguro, pero seg√∫n la informaci√≥n disponible..."</p> </div> </div> </div> <div class="bg-[#0a0a0a] p-6 rounded-xl"> <h3 class="text-xl font-bold text-indigo-300 mb-4">üíª Sistema de verificaci√≥n</h3> <div class="bg-[#141414] p-4 rounded-lg font-mono text-sm text-indigo-300 overflow-x-auto"> <pre>def verify_response(response, context_docs, query):
    # 1. Extrae afirmaciones clave
    claims = extract_claims(response)
    
    # 2. Verifica cada afirmaci√≥n contra el contexto
    verification_scores = []
    for claim in claims:
        score = verify_claim_against_context(claim, context_docs)
        verification_scores.append(score)
    
    # 3. Calcula confianza general
    confidence = sum(verification_scores) / len(verification_scores)
    
    # 4. Ajusta respuesta seg√∫n confianza
    if confidence &lt; 0.7:
        response = f&quot;[Confianza: {confidence:.0%}] &quot; + response
        response += &quot;\n\nNota: Algunas partes de esta respuesta tienen confianza limitada.&quot;
    
    return response, confidence</pre> </div> </div> </div> <!-- Resumen de m√©tricas --> <div class="mb-20 bg-gradient-to-r from-cyan-900/30 via-blue-900/30 to-purple-900/30 border-2 border-cyan-400/50 p-10 rounded-3xl"> <h2 class="text-3xl font-bold text-cyan-400 mb-8 text-center">
üìä Impacto medible de estas pr√°cticas
</h2> <div class="grid md:grid-cols-3 gap-6"> <div class="bg-[#0a0a0a] p-6 rounded-xl text-center"> <div class="text-5xl font-bold text-green-400 mb-2">95%+</div> <p class="text-white/80">Precisi√≥n en respuestas</p> <p class="text-white/60 text-sm mt-2">vs 65-70% sin estas pr√°cticas</p> </div> <div class="bg-[#0a0a0a] p-6 rounded-xl text-center"> <div class="text-5xl font-bold text-cyan-400 mb-2">&lt;5%</div> <p class="text-white/80">Tasa de alucinaciones</p> <p class="text-white/60 text-sm mt-2">vs 20-30% en sistemas b√°sicos</p> </div> <div class="bg-[#0a0a0a] p-6 rounded-xl text-center"> <div class="text-5xl font-bold text-purple-400 mb-2">2-3s</div> <p class="text-white/80">Tiempo de respuesta</p> <p class="text-white/60 text-sm mt-2">Optimizado con filtrado y reranking</p> </div> </div> </div> <!-- CTA final mejorado --> <div class="text-center max-w-4xl mx-auto mt-20"> <div class="bg-gradient-to-r from-cyan-900/30 to-blue-900/30 border-2 border-cyan-400/50 p-10 rounded-3xl shadow-[0_0_50px_rgba(0,255,255,0.3)]"> <h2 class="text-3xl md:text-4xl font-bold text-cyan-400 mb-6">
¬øNecesitas ayuda implementando estas pr√°cticas?
</h2> <p class="text-xl text-white/90 mb-4">
En <strong class="text-cyan-400">Vectoriza.me</strong> dise√±amos sistemas RAG que implementan todas estas mejores pr√°cticas desde el d√≠a uno.
</p> <div class="grid md:grid-cols-3 gap-4 mb-8 text-left"> <div class="bg-[#0a0a0a] p-4 rounded-lg"> <p class="text-cyan-300 font-semibold mb-2">‚úÖ Arquitectura optimizada</p> <p class="text-white/70 text-sm">Multi-query, reranking y chunking inteligente incluidos</p> </div> <div class="bg-[#0a0a0a] p-4 rounded-lg"> <p class="text-cyan-300 font-semibold mb-2">‚úÖ Control de calidad</p> <p class="text-white/70 text-sm">Sistema de verificaci√≥n y detecci√≥n de alucinaciones</p> </div> <div class="bg-[#0a0a0a] p-4 rounded-lg"> <p class="text-cyan-300 font-semibold mb-2">‚úÖ Mantenimiento continuo</p> <p class="text-white/70 text-sm">Pipeline de actualizaci√≥n autom√°tica configurado</p> </div> </div> <a href="/#finalcta" class="inline-block px-10 py-5 bg-cyan-400 hover:bg-cyan-500 text-black font-bold rounded-full shadow-[0_0_30px_rgba(0,255,255,0.5)] hover:shadow-[0_0_50px_rgba(0,255,255,0.7)] transition-all text-xl transform hover:scale-105">
üöÄ Solicitar consulta t√©cnica gratuita
</a> <p class="text-white/60 text-sm mt-6">
Analizamos tu caso ‚Ä¢ Te damos un plan de implementaci√≥n ‚Ä¢ Sin compromiso
</p> </div> </div> </section>  </main> <footer class="text-center text-sm py-6 text-gray-500 bg-black border-t border-white/10"><div class="max-w-6xl mx-auto px-6"><p class="mb-3">¬© <!-- -->2026<!-- --> vectoriza.me ‚Äî Creado por<!-- --> <a href="https://www.linkedin.com/in/marc-gimeno-b2546020a/" target="_blank" rel="noopener noreferrer" class="text-cyan-400 hover:text-cyan-300 transition-colors duration-300 inline-flex items-center gap-1"><span>Marc Gimeno</span><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="14" width="14" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></p><p class="text-white/40 text-xs">Made with ‚ù§Ô∏è usando IA</p></div></footer> <vercel-analytics data-props="{}" data-params="{}" data-pathname="/blog/buenas-practicas-rag/"></vercel-analytics> <script type="module">var f="@vercel/analytics",l="1.5.0",w=()=>{window.va||(window.va=function(...r){(window.vaq=window.vaq||[]).push(r)})};function d(){return typeof window<"u"}function u(){try{const e="production"}catch{}return"production"}function v(e="auto"){if(e==="auto"){window.vam=u();return}window.vam=e}function m(){return(d()?window.vam:u())||"production"}function c(){return m()==="development"}function b(e,r){if(!e||!r)return e;let n=e;try{const t=Object.entries(r);for(const[a,i]of t)if(!Array.isArray(i)){const o=s(i);o.test(n)&&(n=n.replace(o,`/[${a}]`))}for(const[a,i]of t)if(Array.isArray(i)){const o=s(i.join("/"));o.test(n)&&(n=n.replace(o,`/[...${a}]`))}return n}catch{return e}}function s(e){return new RegExp(`/${h(e)}(?=[/?#]|$)`)}function h(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(e){return e.scriptSrc?e.scriptSrc:c()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function g(e={debug:!0}){var r;if(!d())return;v(e.mode),w(),e.beforeSend&&((r=window.va)==null||r.call(window,"beforeSend",e.beforeSend));const n=y(e);if(document.head.querySelector(`script[src*="${n}"]`))return;const t=document.createElement("script");t.src=n,t.defer=!0,t.dataset.sdkn=f+(e.framework?`/${e.framework}`:""),t.dataset.sdkv=l,e.disableAutoTrack&&(t.dataset.disableAutoTrack="1"),e.endpoint?t.dataset.endpoint=e.endpoint:e.basePath&&(t.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(t.dataset.dsn=e.dsn),t.onerror=()=>{const a=c()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${n}. ${a}`)},c()&&e.debug===!1&&(t.dataset.debug="false"),document.head.appendChild(t)}function p({route:e,path:r}){var n;(n=window.va)==null||n.call(window,"pageview",{route:e,path:r})}function k(){try{return}catch{}}customElements.define("vercel-analytics",class extends HTMLElement{constructor(){super();try{const r=JSON.parse(this.dataset.props??"{}"),n=JSON.parse(this.dataset.params??"{}");g({...r,disableAutoTrack:!0,framework:"astro",basePath:k(),beforeSend:window.webAnalyticsBeforeSend});const t=this.dataset.pathname;p({route:b(t??"",n),path:t})}catch(r){throw new Error(`Failed to parse WebAnalytics properties: ${r}`)}}});</script> <vercel-speed-insights data-props="{}" data-params="{}" data-pathname="/blog/buenas-practicas-rag/"></vercel-speed-insights> <script type="module">var o="@vercel/speed-insights",u="1.2.0",f=()=>{window.si||(window.si=function(...r){(window.siq=window.siq||[]).push(r)})};function l(){return typeof window<"u"}function h(){try{const e="production"}catch{}return"production"}function d(){return h()==="development"}function v(e,r){if(!e||!r)return e;let n=e;try{const t=Object.entries(r);for(const[s,i]of t)if(!Array.isArray(i)){const a=c(i);a.test(n)&&(n=n.replace(a,`/[${s}]`))}for(const[s,i]of t)if(Array.isArray(i)){const a=c(i.join("/"));a.test(n)&&(n=n.replace(a,`/[...${s}]`))}return n}catch{return e}}function c(e){return new RegExp(`/${g(e)}(?=[/?#]|$)`)}function g(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){return e.scriptSrc?e.scriptSrc:d()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":e.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":e.basePath?`${e.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function w(e={}){var r;if(!l()||e.route===null)return null;f();const n=m(e);if(document.head.querySelector(`script[src*="${n}"]`))return null;e.beforeSend&&((r=window.si)==null||r.call(window,"beforeSend",e.beforeSend));const t=document.createElement("script");return t.src=n,t.defer=!0,t.dataset.sdkn=o+(e.framework?`/${e.framework}`:""),t.dataset.sdkv=u,e.sampleRate&&(t.dataset.sampleRate=e.sampleRate.toString()),e.route&&(t.dataset.route=e.route),e.endpoint?t.dataset.endpoint=e.endpoint:e.basePath&&(t.dataset.endpoint=`${e.basePath}/speed-insights/vitals`),e.dsn&&(t.dataset.dsn=e.dsn),d()&&e.debug===!1&&(t.dataset.debug="false"),t.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${n}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(t),{setRoute:s=>{t.dataset.route=s??void 0}}}function p(){try{return}catch{}}customElements.define("vercel-speed-insights",class extends HTMLElement{constructor(){super();try{const r=JSON.parse(this.dataset.props??"{}"),n=JSON.parse(this.dataset.params??"{}"),t=v(this.dataset.pathname??"",n);w({route:t,...r,framework:"astro",basePath:p(),beforeSend:window.speedInsightsBeforeSend})}catch(r){throw new Error(`Failed to parse SpeedInsights properties: ${r}`)}}});</script> </body></html>